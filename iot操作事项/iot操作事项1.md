# iot 操作说明

1.在管理端的设备分类中添加模板，先创建父类模板，再创建子类模板

2.对子类模板点击“模板属性”，进行属性定义，重点写属性名称（采集器的传参之一），数据类型（influxDB有相应的存储数据库）

3.对子类模板点击“属性类别管理”，可为客户端的设备监控做准备。操作步骤是，添加分类、定义分类名称、选择图标、将属性列表中的部分属性打√，点击保存，完成了一个监控组的分类。

4.在客户端的设备信息中添加设备，选择设备分类（对应管理端的子类模板），即可创建设备，并自动为该设备配置子类模板中定义的所有属性。

5.在客户端的设备信息中取设备ID，以及相应各属性名称，作为采集器上传的关键识别参数（deviceID + attriname）

6.关于子类模板修改的注意事项：在根据模板创建了一个设备之后，若此时修改模板，对于原设备，其属性等特性保持不变，但对于新创建的设备有效。

7.属性名称在采集器端可以取数字，对应采集器中转发表的序列号。若采集器上传时能够定义有意义的名称进行定义则更好，待采集器厂商确认。

8.JSON包的规范格式：利用网站：https://www.json.cn/，可以检查写的JSON包有无错误。

9.MQTT的上传测试工具：messagebox.  类似串口调试助手，首先建立连接，然后publish或subscribe。

10.建立连接的步骤：定义MQTT客户端名称、定义protocol为mqtt/tcp、定义带端口号的 Host 地址（结尾是:1883 ）、输入用户名和密码、其余默认。

11.publish：填写 topic 和 payload 即可 publish。 subscribe 只需填写 topic。测试MQTT服务器是否正常的方法是，publish和subscribe同一个主题，看publish后subscribe能否接收到payload。